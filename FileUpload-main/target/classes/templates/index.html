<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta charset="UTF-8">
    <title>File Upload </title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
          crossorigin="anonymous">
    <link th:href="@{/style.css}" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
            crossorigin="anonymous"></script>
</head>
<body style="background-color: teal;">
<div class="container text-center">
    <div>
        <h1> File Upload </h1>
    </div>
    <div class="card" style="width: 25rem;" align="center">
        <div class="card-body" align="center">
            <h2 class="card-title">File Upload</h2>
            <!-- Display error message if any -->
            <h6 class="text-danger" th:text="${error}"></h6>
            <!-- Display success message if any -->
            <h6 class="text-success" th:text="${success}"></h6>
            <div class="mb-3">
                <form th:action="@{/upload}" method="post" enctype="multipart/form-data">
                    <input class="form-control" name="file" type="file" id="formFile"><br/>
                    <input type="submit" value="Upload" class="btn btn-success">
                </form>
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <!-- Iterate through the list of uploaded files -->
                    <th:block th:each="empList: ${list}">
                        <div class="col-sm-3">
                            <div>
                                <!-- Link to download the file -->
                                <a th:href="@{'/downloadfile?id=' + ${empList.id}}"><i
                                        class="fa fa-download"></i></a>
                            </div>
                            <div>
                                <!-- Display thumbnail or icon for the file -->
                                <!-- Assuming the file is an image -->
                                <img th:src="@{'/image?id='+ ${empList.id}}" width="100px"
                                     height="50px">
                            </div>
                            <div th:text="${empList.profilePicture}"></div>
                            <div th:text="(${empList.size}) + ' B'"></div>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>
